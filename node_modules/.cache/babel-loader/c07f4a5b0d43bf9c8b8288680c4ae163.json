{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject13(){var data=_taggedTemplateLiteral([\"\\n  :hover {\\n    cursor: pointer;\\n  }\\n\"]);_templateObject13=function _templateObject13(){return data;};return data;}function _templateObject12(){var data=_taggedTemplateLiteral([\"\\n    grid-template-columns: 1fr;\\n    grid-gap: 10px;\\n  \"]);_templateObject12=function _templateObject12(){return data;};return data;}function _templateObject11(){var data=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  grid-gap: 10px;\\n  \",\";\\n\"]);_templateObject11=function _templateObject11(){return data;};return data;}function _templateObject10(){var data=_taggedTemplateLiteral([\"\\n    margin: 1rem;\\n    font-size: 12px;\\n  \"]);_templateObject10=function _templateObject10(){return data;};return data;}function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  align-items: center;\\n  justify-content: center;\\n  margin-top: 2rem;\\n  \",\";\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  position: relative;\\n  background-color: \",\";\\n\\n  h5 {\\n    margin: 0;\\n    margin-bottom: 0.5rem;\\n    font-size: 1rem;\\n    font-weight: 400;\\n  }\\n\\n  h5:last-child {\\n    margin-bottom: 0px;\\n  }\\n\\n  h4 {\\n    margin-top: 0;\\n    font-weight: 500;\\n  }\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"padding: 1rem\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n  padding: 2rem;\\n  \",\";\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n    padding: 1rem;\\n  \"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  \",\";\\n  padding: 1.5rem 1.5rem;\\n  font-weight: 500;\\n  color: \",\";\\n  \",\";\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  margin: 0;\\n  padding: 0;\\n  width: 100%;\\n  background-color: \",\";\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  path {\\n    stroke: \",\";\\n  }\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  right: 1rem;\\n  top: 14px;\\n  &:hover {\\n    cursor: pointer;\\n    opacity: 0.6;\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect}from'react';import ReactGA from'react-ga';import styled from'styled-components';import{isMobile}from'react-device-detect';import{useTranslation}from'react-i18next';import{useWeb3React,UnsupportedChainIdError}from'@web3-react/core';import{URI_AVAILABLE}from'@web3-react/walletconnect-connector';import Modal from'../Modal';import AccountDetails from'../AccountDetails';import PendingView from'./PendingView';import Option from'./Option';import{SUPPORTED_WALLETS}from'../../constants';import{usePrevious}from'../../hooks';import{Link}from'../../theme';import MetamaskIcon from'../../assets/images/metamask.png';import{ReactComponent as Close}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/images/x.svg\";import{injected,walletconnect,fortmatic,portis}from'../../connectors';import{useWalletModalToggle,useWalletModalOpen}from'../../contexts/Application';import{OVERLAY_READY}from'../../connectors/Fortmatic';var CloseIcon=styled.div(_templateObject());var CloseColor=styled(Close)(_templateObject2(),function(_ref){var theme=_ref.theme;return theme.chaliceGray;});var Wrapper=styled.div(_templateObject3(),function(_ref2){var theme=_ref2.theme;return theme.flexColumnNoWrap;},function(_ref3){var theme=_ref3.theme;return theme.backgroundColor;});var HeaderRow=styled.div(_templateObject4(),function(_ref4){var theme=_ref4.theme;return theme.flexRowNoWrap;},function(props){return props.color==='blue'?function(_ref5){var theme=_ref5.theme;return theme.royalBlue;}:'inherit';},function(_ref6){var theme=_ref6.theme;return theme.mediaWidth.upToMedium(_templateObject5());});var ContentWrapper=styled.div(_templateObject6(),function(_ref7){var theme=_ref7.theme;return theme.backgroundColor;},function(_ref8){var theme=_ref8.theme;return theme.mediaWidth.upToMedium(_templateObject7());});var UpperSection=styled.div(_templateObject8(),function(_ref9){var theme=_ref9.theme;return theme.concreteGray;});var Blurb=styled.div(_templateObject9(),function(_ref10){var theme=_ref10.theme;return theme.flexRowNoWrap;},function(_ref11){var theme=_ref11.theme;return theme.mediaWidth.upToMedium(_templateObject10());});var OptionGrid=styled.div(_templateObject11(),function(_ref12){var theme=_ref12.theme;return theme.mediaWidth.upToMedium(_templateObject12());});var HoverText=styled.div(_templateObject13());var WALLET_VIEWS={OPTIONS:'options',OPTIONS_SECONDARY:'options_secondary',ACCOUNT:'account',PENDING:'pending'};export default function WalletModal(_ref13){var pendingTransactions=_ref13.pendingTransactions,confirmedTransactions=_ref13.confirmedTransactions,ENSName=_ref13.ENSName;var _useWeb3React=useWeb3React(),active=_useWeb3React.active,account=_useWeb3React.account,connector=_useWeb3React.connector,activate=_useWeb3React.activate,error=_useWeb3React.error;var _useState=useState(WALLET_VIEWS.ACCOUNT),_useState2=_slicedToArray(_useState,2),walletView=_useState2[0],setWalletView=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),pendingWallet=_useState4[0],setPendingWallet=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),pendingError=_useState6[0],setPendingError=_useState6[1];var walletModalOpen=useWalletModalOpen();var toggleWalletModal=useWalletModalToggle();var _useTranslation=useTranslation(),t=_useTranslation.t;// always reset to account view\nuseEffect(function(){if(walletModalOpen){setPendingError(false);setWalletView(WALLET_VIEWS.ACCOUNT);}},[walletModalOpen]);// set up uri listener for walletconnect\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),uri=_useState8[0],setUri=_useState8[1];useEffect(function(){var activateWC=function activateWC(uri){setUri(uri);// setWalletView(WALLET_VIEWS.PENDING)\n};walletconnect.on(URI_AVAILABLE,activateWC);return function(){walletconnect.off(URI_AVAILABLE,activateWC);};},[]);// close modal when a connection is successful\nvar activePrevious=usePrevious(active);var connectorPrevious=usePrevious(connector);useEffect(function(){if(walletModalOpen&&(active&&!activePrevious||connector&&connector!==connectorPrevious&&!error)){setWalletView(WALLET_VIEWS.ACCOUNT);}},[setWalletView,active,error,connector,walletModalOpen,activePrevious,connectorPrevious]);var tryActivation=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(connector){var name;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name='';Object.keys(SUPPORTED_WALLETS).map(function(key){if(connector===SUPPORTED_WALLETS[key].connector){return name=SUPPORTED_WALLETS[key].name;}return true;});// log selected wallet\nReactGA.event({category:'Wallet',action:'Change Wallet',label:name});setPendingWallet(connector);// set wallet for pending view\nsetWalletView(WALLET_VIEWS.PENDING);activate(connector,undefined,true).catch(function(error){if(error instanceof UnsupportedChainIdError){activate(connector);// a little janky...can't use setError because the connector isn't set\n}else{setPendingError(true);}});case 6:case\"end\":return _context.stop();}}},_callee);}));return function tryActivation(_x){return _ref14.apply(this,arguments);};}();// close wallet modal if fortmatic modal is active\nuseEffect(function(){fortmatic.on(OVERLAY_READY,function(){toggleWalletModal();});},[toggleWalletModal]);// get wallets user can switch too, depending on device/browser\nfunction getOptions(){var isMetamask=window.ethereum&&window.ethereum.isMetaMask;return Object.keys(SUPPORTED_WALLETS).map(function(key){var option=SUPPORTED_WALLETS[key];// check for mobile options\nif(isMobile){// disable portis on mobile for now\nif(option.connector===portis){return null;}if(!window.web3&&!window.ethereum&&option.mobile){return/*#__PURE__*/React.createElement(Option,{onClick:function onClick(){option.connector!==connector&&!option.href&&tryActivation(option.connector);},key:key,active:option.connector&&option.connector===connector,color:option.color,link:option.href,header:option.name,subheader:null,icon:require('../../assets/images/'+option.iconName)});}return null;}// overwrite injected when needed\nif(option.connector===injected){// don't show injected if there's no injected provider\nif(!(window.web3||window.ethereum)){if(option.name==='MetaMask'){return/*#__PURE__*/React.createElement(Option,{key:key,color:'#E8831D',header:'Install Metamask',subheader:null,link:'https://metamask.io/',icon:MetamaskIcon});}else{return null;// dont want to return install twice\n}}// don't return metamask if injected provider isn't metamask\nelse if(option.name==='MetaMask'&&!isMetamask){return null;}// likewise for generic\nelse if(option.name==='Injected'&&isMetamask){return null;}}// return rest of options\nreturn!isMobile&&!option.mobileOnly&&/*#__PURE__*/React.createElement(Option,{onClick:function onClick(){option.connector===connector?setWalletView(WALLET_VIEWS.ACCOUNT):!option.href&&tryActivation(option.connector);},key:key,active:option.connector===connector,color:option.color,link:option.href,header:option.name,subheader:null// use option.descriptio to bring back multi-line\n,icon:require('../../assets/images/'+option.iconName)});});}function getModalContent(){if(error){return/*#__PURE__*/React.createElement(UpperSection,null,/*#__PURE__*/React.createElement(CloseIcon,{onClick:toggleWalletModal},/*#__PURE__*/React.createElement(CloseColor,{alt:'close icon'})),/*#__PURE__*/React.createElement(HeaderRow,null,error instanceof UnsupportedChainIdError?'Wrong Network':'Error connecting'),/*#__PURE__*/React.createElement(ContentWrapper,null,error instanceof UnsupportedChainIdError?/*#__PURE__*/React.createElement(\"h5\",null,\"Please connect to the main Ethereum network.\"):'Error connecting. Try refreshing the page.'));}if(account&&walletView===WALLET_VIEWS.ACCOUNT){return/*#__PURE__*/React.createElement(AccountDetails,{toggleWalletModal:toggleWalletModal,pendingTransactions:pendingTransactions,confirmedTransactions:confirmedTransactions,ENSName:ENSName,openOptions:function openOptions(){return setWalletView(WALLET_VIEWS.OPTIONS);}});}return/*#__PURE__*/React.createElement(UpperSection,null,/*#__PURE__*/React.createElement(CloseIcon,{onClick:toggleWalletModal},/*#__PURE__*/React.createElement(CloseColor,{alt:'close icon'})),walletView!==WALLET_VIEWS.ACCOUNT?/*#__PURE__*/React.createElement(HeaderRow,{color:\"blue\"},/*#__PURE__*/React.createElement(HoverText,{onClick:function onClick(){setPendingError(false);setWalletView(WALLET_VIEWS.ACCOUNT);}},\"Back\")):/*#__PURE__*/React.createElement(HeaderRow,null,/*#__PURE__*/React.createElement(HoverText,null,t('connectToWallet'))),/*#__PURE__*/React.createElement(ContentWrapper,null,walletView===WALLET_VIEWS.PENDING?/*#__PURE__*/React.createElement(PendingView,{uri:uri,size:220,connector:pendingWallet,error:pendingError,setPendingError:setPendingError,tryActivation:tryActivation}):/*#__PURE__*/React.createElement(OptionGrid,null,getOptions()),walletView!==WALLET_VIEWS.PENDING&&/*#__PURE__*/React.createElement(Blurb,null,/*#__PURE__*/React.createElement(\"span\",null,\"New to Ethereum? \\xA0\"),' ',/*#__PURE__*/React.createElement(Link,{href:\"https://ethereum.org/use/#3-what-is-a-wallet-and-which-one-should-i-use\"},\"Learn more about wallets\"))));}return/*#__PURE__*/React.createElement(Modal,{style:{userSelect:'none'},isOpen:walletModalOpen,onDismiss:toggleWalletModal,minHeight:null,maxHeight:90},/*#__PURE__*/React.createElement(Wrapper,null,getModalContent()));}","map":{"version":3,"sources":["/Users/kerp/Documents/GitHub/landing-page/src/components/WalletModal/index.js"],"names":["React","useState","useEffect","ReactGA","styled","isMobile","useTranslation","useWeb3React","UnsupportedChainIdError","URI_AVAILABLE","Modal","AccountDetails","PendingView","Option","SUPPORTED_WALLETS","usePrevious","Link","MetamaskIcon","injected","walletconnect","fortmatic","portis","useWalletModalToggle","useWalletModalOpen","OVERLAY_READY","CloseIcon","div","CloseColor","Close","theme","chaliceGray","Wrapper","flexColumnNoWrap","backgroundColor","HeaderRow","flexRowNoWrap","props","color","royalBlue","mediaWidth","upToMedium","ContentWrapper","UpperSection","concreteGray","Blurb","OptionGrid","HoverText","WALLET_VIEWS","OPTIONS","OPTIONS_SECONDARY","ACCOUNT","PENDING","WalletModal","pendingTransactions","confirmedTransactions","ENSName","active","account","connector","activate","error","walletView","setWalletView","pendingWallet","setPendingWallet","pendingError","setPendingError","walletModalOpen","toggleWalletModal","t","uri","setUri","activateWC","on","off","activePrevious","connectorPrevious","tryActivation","name","Object","keys","map","key","event","category","action","label","undefined","catch","getOptions","isMetamask","window","ethereum","isMetaMask","option","web3","mobile","href","require","iconName","mobileOnly","getModalContent","userSelect"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport ReactGA from 'react-ga'\nimport styled from 'styled-components'\nimport { isMobile } from 'react-device-detect'\nimport { useTranslation } from 'react-i18next'\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\nimport { URI_AVAILABLE } from '@web3-react/walletconnect-connector'\n\nimport Modal from '../Modal'\nimport AccountDetails from '../AccountDetails'\nimport PendingView from './PendingView'\nimport Option from './Option'\nimport { SUPPORTED_WALLETS } from '../../constants'\nimport { usePrevious } from '../../hooks'\nimport { Link } from '../../theme'\nimport MetamaskIcon from '../../assets/images/metamask.png'\nimport { ReactComponent as Close } from '../../assets/images/x.svg'\nimport { injected, walletconnect, fortmatic, portis } from '../../connectors'\nimport { useWalletModalToggle, useWalletModalOpen } from '../../contexts/Application'\nimport { OVERLAY_READY } from '../../connectors/Fortmatic'\n\nconst CloseIcon = styled.div`\n  position: absolute;\n  right: 1rem;\n  top: 14px;\n  &:hover {\n    cursor: pointer;\n    opacity: 0.6;\n  }\n`\n\nconst CloseColor = styled(Close)`\n  path {\n    stroke: ${({ theme }) => theme.chaliceGray};\n  }\n`\n\nconst Wrapper = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap}\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  background-color: ${({ theme }) => theme.backgroundColor};\n`\n\nconst HeaderRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  padding: 1.5rem 1.5rem;\n  font-weight: 500;\n  color: ${props => (props.color === 'blue' ? ({ theme }) => theme.royalBlue : 'inherit')};\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    padding: 1rem;\n  `};\n`\n\nconst ContentWrapper = styled.div`\n  background-color: ${({ theme }) => theme.backgroundColor};\n  padding: 2rem;\n  ${({ theme }) => theme.mediaWidth.upToMedium`padding: 1rem`};\n`\n\nconst UpperSection = styled.div`\n  position: relative;\n  background-color: ${({ theme }) => theme.concreteGray};\n\n  h5 {\n    margin: 0;\n    margin-bottom: 0.5rem;\n    font-size: 1rem;\n    font-weight: 400;\n  }\n\n  h5:last-child {\n    margin-bottom: 0px;\n  }\n\n  h4 {\n    margin-top: 0;\n    font-weight: 500;\n  }\n`\n\nconst Blurb = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  align-items: center;\n  justify-content: center;\n  margin-top: 2rem;\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    margin: 1rem;\n    font-size: 12px;\n  `};\n`\n\nconst OptionGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 10px;\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    grid-template-columns: 1fr;\n    grid-gap: 10px;\n  `};\n`\n\nconst HoverText = styled.div`\n  :hover {\n    cursor: pointer;\n  }\n`\n\nconst WALLET_VIEWS = {\n  OPTIONS: 'options',\n  OPTIONS_SECONDARY: 'options_secondary',\n  ACCOUNT: 'account',\n  PENDING: 'pending'\n}\n\nexport default function WalletModal({ pendingTransactions, confirmedTransactions, ENSName }) {\n  const { active, account, connector, activate, error } = useWeb3React()\n\n  const [walletView, setWalletView] = useState(WALLET_VIEWS.ACCOUNT)\n\n  const [pendingWallet, setPendingWallet] = useState()\n\n  const [pendingError, setPendingError] = useState()\n\n  const walletModalOpen = useWalletModalOpen()\n  const toggleWalletModal = useWalletModalToggle()\n\n  const { t } = useTranslation()\n\n  // always reset to account view\n  useEffect(() => {\n    if (walletModalOpen) {\n      setPendingError(false)\n      setWalletView(WALLET_VIEWS.ACCOUNT)\n    }\n  }, [walletModalOpen])\n\n  // set up uri listener for walletconnect\n  const [uri, setUri] = useState()\n  useEffect(() => {\n    const activateWC = uri => {\n      setUri(uri)\n      // setWalletView(WALLET_VIEWS.PENDING)\n    }\n    walletconnect.on(URI_AVAILABLE, activateWC)\n    return () => {\n      walletconnect.off(URI_AVAILABLE, activateWC)\n    }\n  }, [])\n\n  // close modal when a connection is successful\n  const activePrevious = usePrevious(active)\n  const connectorPrevious = usePrevious(connector)\n  useEffect(() => {\n    if (walletModalOpen && ((active && !activePrevious) || (connector && connector !== connectorPrevious && !error))) {\n      setWalletView(WALLET_VIEWS.ACCOUNT)\n    }\n  }, [setWalletView, active, error, connector, walletModalOpen, activePrevious, connectorPrevious])\n\n  const tryActivation = async connector => {\n    let name = ''\n    Object.keys(SUPPORTED_WALLETS).map(key => {\n      if (connector === SUPPORTED_WALLETS[key].connector) {\n        return (name = SUPPORTED_WALLETS[key].name)\n      }\n      return true\n    })\n    // log selected wallet\n    ReactGA.event({\n      category: 'Wallet',\n      action: 'Change Wallet',\n      label: name\n    })\n    setPendingWallet(connector) // set wallet for pending view\n    setWalletView(WALLET_VIEWS.PENDING)\n    activate(connector, undefined, true).catch(error => {\n      if (error instanceof UnsupportedChainIdError) {\n        activate(connector) // a little janky...can't use setError because the connector isn't set\n      } else {\n        setPendingError(true)\n      }\n    })\n  }\n\n  // close wallet modal if fortmatic modal is active\n  useEffect(() => {\n    fortmatic.on(OVERLAY_READY, () => {\n      toggleWalletModal()\n    })\n  }, [toggleWalletModal])\n\n  // get wallets user can switch too, depending on device/browser\n  function getOptions() {\n    const isMetamask = window.ethereum && window.ethereum.isMetaMask\n    return Object.keys(SUPPORTED_WALLETS).map(key => {\n      const option = SUPPORTED_WALLETS[key]\n      // check for mobile options\n      if (isMobile) {\n        // disable portis on mobile for now\n        if (option.connector === portis) {\n          return null\n        }\n\n        if (!window.web3 && !window.ethereum && option.mobile) {\n          return (\n            <Option\n              onClick={() => {\n                option.connector !== connector && !option.href && tryActivation(option.connector)\n              }}\n              key={key}\n              active={option.connector && option.connector === connector}\n              color={option.color}\n              link={option.href}\n              header={option.name}\n              subheader={null}\n              icon={require('../../assets/images/' + option.iconName)}\n            />\n          )\n        }\n        return null\n      }\n\n      // overwrite injected when needed\n      if (option.connector === injected) {\n        // don't show injected if there's no injected provider\n        if (!(window.web3 || window.ethereum)) {\n          if (option.name === 'MetaMask') {\n            return (\n              <Option\n                key={key}\n                color={'#E8831D'}\n                header={'Install Metamask'}\n                subheader={null}\n                link={'https://metamask.io/'}\n                icon={MetamaskIcon}\n              />\n            )\n          } else {\n            return null // dont want to return install twice\n          }\n        }\n        // don't return metamask if injected provider isn't metamask\n        else if (option.name === 'MetaMask' && !isMetamask) {\n          return null\n        }\n        // likewise for generic\n        else if (option.name === 'Injected' && isMetamask) {\n          return null\n        }\n      }\n\n      // return rest of options\n      return (\n        !isMobile &&\n        !option.mobileOnly && (\n          <Option\n            onClick={() => {\n              option.connector === connector\n                ? setWalletView(WALLET_VIEWS.ACCOUNT)\n                : !option.href && tryActivation(option.connector)\n            }}\n            key={key}\n            active={option.connector === connector}\n            color={option.color}\n            link={option.href}\n            header={option.name}\n            subheader={null} // use option.descriptio to bring back multi-line\n            icon={require('../../assets/images/' + option.iconName)}\n          />\n        )\n      )\n    })\n  }\n\n  function getModalContent() {\n    if (error) {\n      return (\n        <UpperSection>\n          <CloseIcon onClick={toggleWalletModal}>\n            <CloseColor alt={'close icon'} />\n          </CloseIcon>\n          <HeaderRow>{error instanceof UnsupportedChainIdError ? 'Wrong Network' : 'Error connecting'}</HeaderRow>\n          <ContentWrapper>\n            {error instanceof UnsupportedChainIdError ? (\n              <h5>Please connect to the main Ethereum network.</h5>\n            ) : (\n              'Error connecting. Try refreshing the page.'\n            )}\n          </ContentWrapper>\n        </UpperSection>\n      )\n    }\n    if (account && walletView === WALLET_VIEWS.ACCOUNT) {\n      return (\n        <AccountDetails\n          toggleWalletModal={toggleWalletModal}\n          pendingTransactions={pendingTransactions}\n          confirmedTransactions={confirmedTransactions}\n          ENSName={ENSName}\n          openOptions={() => setWalletView(WALLET_VIEWS.OPTIONS)}\n        />\n      )\n    }\n    return (\n      <UpperSection>\n        <CloseIcon onClick={toggleWalletModal}>\n          <CloseColor alt={'close icon'} />\n        </CloseIcon>\n        {walletView !== WALLET_VIEWS.ACCOUNT ? (\n          <HeaderRow color=\"blue\">\n            <HoverText\n              onClick={() => {\n                setPendingError(false)\n                setWalletView(WALLET_VIEWS.ACCOUNT)\n              }}\n            >\n              Back\n            </HoverText>\n          </HeaderRow>\n        ) : (\n          <HeaderRow>\n            <HoverText>{t('connectToWallet')}</HoverText>\n          </HeaderRow>\n        )}\n        <ContentWrapper>\n          {walletView === WALLET_VIEWS.PENDING ? (\n            <PendingView\n              uri={uri}\n              size={220}\n              connector={pendingWallet}\n              error={pendingError}\n              setPendingError={setPendingError}\n              tryActivation={tryActivation}\n            />\n          ) : (\n            <OptionGrid>{getOptions()}</OptionGrid>\n          )}\n          {walletView !== WALLET_VIEWS.PENDING && (\n            <Blurb>\n              <span>New to Ethereum? &nbsp;</span>{' '}\n              <Link href=\"https://ethereum.org/use/#3-what-is-a-wallet-and-which-one-should-i-use\">\n                Learn more about wallets\n              </Link>\n            </Blurb>\n          )}\n        </ContentWrapper>\n      </UpperSection>\n    )\n  }\n\n  return (\n    <Modal\n      style={{ userSelect: 'none' }}\n      isOpen={walletModalOpen}\n      onDismiss={toggleWalletModal}\n      minHeight={null}\n      maxHeight={90}\n    >\n      <Wrapper>{getModalContent()}</Wrapper>\n    </Modal>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}