{"ast":null,"code":"import _slicedToArray from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{createContext,useContext,useReducer,useMemo,useCallback,useEffect}from'react';import{useWeb3React}from'../hooks';import{safeAccess}from'../utils';var BLOCK_NUMBER='BLOCK_NUMBER';var USD_PRICE='USD_PRICE';var WALLET_MODAL_OPEN='WALLET_MODAL_OPEN';var UPDATE_BLOCK_NUMBER='UPDATE_BLOCK_NUMBER';var TOGGLE_WALLET_MODAL='TOGGLE_WALLET_MODAL';var ApplicationContext=createContext();function useApplicationContext(){return useContext(ApplicationContext);}function reducer(state,_ref){var type=_ref.type,payload=_ref.payload;switch(type){case UPDATE_BLOCK_NUMBER:{var networkId=payload.networkId,blockNumber=payload.blockNumber;return _objectSpread(_objectSpread({},state),{},_defineProperty({},BLOCK_NUMBER,_objectSpread(_objectSpread({},safeAccess(state,[BLOCK_NUMBER])||{}),{},_defineProperty({},networkId,blockNumber))));}case TOGGLE_WALLET_MODAL:{return _objectSpread(_objectSpread({},state),{},_defineProperty({},WALLET_MODAL_OPEN,!state[WALLET_MODAL_OPEN]));}default:{throw Error(\"Unexpected action type in ApplicationContext reducer: '\".concat(type,\"'.\"));}}}export default function Provider(_ref2){var _useReducer3;var children=_ref2.children;var _useReducer=useReducer(reducer,(_useReducer3={},_defineProperty(_useReducer3,BLOCK_NUMBER,{}),_defineProperty(_useReducer3,USD_PRICE,{}),_defineProperty(_useReducer3,WALLET_MODAL_OPEN,false),_useReducer3)),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var updateBlockNumber=useCallback(function(networkId,blockNumber){dispatch({type:UPDATE_BLOCK_NUMBER,payload:{networkId:networkId,blockNumber:blockNumber}});},[]);var toggleWalletModal=useCallback(function(){dispatch({type:TOGGLE_WALLET_MODAL});},[]);return/*#__PURE__*/React.createElement(ApplicationContext.Provider,{value:useMemo(function(){return[state,{updateBlockNumber:updateBlockNumber,toggleWalletModal:toggleWalletModal}];},[state,updateBlockNumber,toggleWalletModal])},children);}export function Updater(){var _useWeb3React=useWeb3React(),library=_useWeb3React.library,chainId=_useWeb3React.chainId;var _useApplicationContex=useApplicationContext(),_useApplicationContex2=_slicedToArray(_useApplicationContex,2),updateBlockNumber=_useApplicationContex2[1].updateBlockNumber;// update block number\nuseEffect(function(){if(library){var update=function update(){library.getBlockNumber().then(function(blockNumber){if(!stale){updateBlockNumber(chainId,blockNumber);}}).catch(function(){if(!stale){updateBlockNumber(chainId,null);}});};var stale=false;update();library.on('block',update);return function(){stale=true;library.removeListener('block',update);};}},[chainId,library,updateBlockNumber]);return null;}export function useBlockNumber(){var _useWeb3React2=useWeb3React(),chainId=_useWeb3React2.chainId;var _useApplicationContex3=useApplicationContext(),_useApplicationContex4=_slicedToArray(_useApplicationContex3,1),state=_useApplicationContex4[0];return safeAccess(state,[BLOCK_NUMBER,chainId]);}export function useWalletModalOpen(){var _useApplicationContex5=useApplicationContext(),_useApplicationContex6=_slicedToArray(_useApplicationContex5,1),state=_useApplicationContex6[0];return state[WALLET_MODAL_OPEN];}export function useWalletModalToggle(){var _useApplicationContex7=useApplicationContext(),_useApplicationContex8=_slicedToArray(_useApplicationContex7,2),toggleWalletModal=_useApplicationContex8[1].toggleWalletModal;return toggleWalletModal;}","map":{"version":3,"sources":["/Users/kerp/Documents/GitHub/landing-page/src/contexts/Application.js"],"names":["React","createContext","useContext","useReducer","useMemo","useCallback","useEffect","useWeb3React","safeAccess","BLOCK_NUMBER","USD_PRICE","WALLET_MODAL_OPEN","UPDATE_BLOCK_NUMBER","TOGGLE_WALLET_MODAL","ApplicationContext","useApplicationContext","reducer","state","type","payload","networkId","blockNumber","Error","Provider","children","dispatch","updateBlockNumber","toggleWalletModal","Updater","library","chainId","update","getBlockNumber","then","stale","catch","on","removeListener","useBlockNumber","useWalletModalOpen","useWalletModalToggle"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useReducer, useMemo, useCallback, useEffect } from 'react'\n\nimport { useWeb3React } from '../hooks'\nimport { safeAccess } from '../utils'\n\nconst BLOCK_NUMBER = 'BLOCK_NUMBER'\nconst USD_PRICE = 'USD_PRICE'\nconst WALLET_MODAL_OPEN = 'WALLET_MODAL_OPEN'\n\nconst UPDATE_BLOCK_NUMBER = 'UPDATE_BLOCK_NUMBER'\nconst TOGGLE_WALLET_MODAL = 'TOGGLE_WALLET_MODAL'\n\nconst ApplicationContext = createContext()\n\nfunction useApplicationContext() {\n  return useContext(ApplicationContext)\n}\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case UPDATE_BLOCK_NUMBER: {\n      const { networkId, blockNumber } = payload\n      return {\n        ...state,\n        [BLOCK_NUMBER]: {\n          ...(safeAccess(state, [BLOCK_NUMBER]) || {}),\n          [networkId]: blockNumber\n        }\n      }\n    }\n\n    case TOGGLE_WALLET_MODAL: {\n      return { ...state, [WALLET_MODAL_OPEN]: !state[WALLET_MODAL_OPEN] }\n    }\n    default: {\n      throw Error(`Unexpected action type in ApplicationContext reducer: '${type}'.`)\n    }\n  }\n}\n\nexport default function Provider({ children }) {\n  const [state, dispatch] = useReducer(reducer, {\n    [BLOCK_NUMBER]: {},\n    [USD_PRICE]: {},\n    [WALLET_MODAL_OPEN]: false\n  })\n\n  const updateBlockNumber = useCallback((networkId, blockNumber) => {\n    dispatch({ type: UPDATE_BLOCK_NUMBER, payload: { networkId, blockNumber } })\n  }, [])\n\n  const toggleWalletModal = useCallback(() => {\n    dispatch({ type: TOGGLE_WALLET_MODAL })\n  }, [])\n\n  return (\n    <ApplicationContext.Provider\n      value={useMemo(() => [state, { updateBlockNumber, toggleWalletModal }], [\n        state,\n        updateBlockNumber,\n        toggleWalletModal\n      ])}\n    >\n      {children}\n    </ApplicationContext.Provider>\n  )\n}\n\nexport function Updater() {\n  const { library, chainId } = useWeb3React()\n\n  const [, { updateBlockNumber }] = useApplicationContext()\n\n  // update block number\n  useEffect(() => {\n    if (library) {\n      let stale = false\n\n      function update() {\n        library\n          .getBlockNumber()\n          .then(blockNumber => {\n            if (!stale) {\n              updateBlockNumber(chainId, blockNumber)\n            }\n          })\n          .catch(() => {\n            if (!stale) {\n              updateBlockNumber(chainId, null)\n            }\n          })\n      }\n\n      update()\n      library.on('block', update)\n\n      return () => {\n        stale = true\n        library.removeListener('block', update)\n      }\n    }\n  }, [chainId, library, updateBlockNumber])\n\n  return null\n}\n\nexport function useBlockNumber() {\n  const { chainId } = useWeb3React()\n\n  const [state] = useApplicationContext()\n\n  return safeAccess(state, [BLOCK_NUMBER, chainId])\n}\n\nexport function useWalletModalOpen() {\n  const [state] = useApplicationContext()\n\n  return state[WALLET_MODAL_OPEN]\n}\n\nexport function useWalletModalToggle() {\n  const [, { toggleWalletModal }] = useApplicationContext()\n\n  return toggleWalletModal\n}\n"]},"metadata":{},"sourceType":"module"}