{"ast":null,"code":"'use strict';\n\nexports.__esModule = true; // istanbul ignore next\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('with', function (context, options) {\n    if (arguments.length != 2) {\n      throw new _exception2['default']('#with requires exactly one argument');\n    }\n\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    var fn = options.fn;\n\n    if (!_utils.isEmpty(context)) {\n      var data = options.data;\n\n      if (options.data && options.ids) {\n        data = _utils.createFrame(options.data);\n        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: _utils.blockParams([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n};\n\nmodule.exports = exports['default'];","map":{"version":3,"sources":["../../../../lib/handlebars/helpers/with.js"],"names":[],"mappings":";;;;;;;;;;qBAMO,U;;yBACe,c;;;;qBAEP,UAAS,QAAT,EAAmB;AAChC,EAAA,QAAQ,CAAC,cAAT,CAAwB,MAAxB,EAAgC,UAAS,OAAT,EAAkB,OAAlB,EAA2B;AACzD,QAAI,SAAS,CAAC,MAAV,IAAoB,CAAxB,EAA2B;AACzB,YAAM,IAAA,WAAA,CAAA,SAAA,CAAA,CAAc,qCAAd,CAAN;AACD;;AACD,QAAI,MAAA,CAAA,UAAA,CAAW,OAAX,CAAJ,EAAyB;AACvB,MAAA,OAAO,GAAG,OAAO,CAAC,IAAR,CAAa,IAAb,CAAV;AACD;;AAED,QAAI,EAAE,GAAG,OAAO,CAAC,EAAjB;;AAEA,QAAI,CAAC,MAAA,CAAA,OAAA,CAAQ,OAAR,CAAL,EAAuB;AACrB,UAAI,IAAI,GAAG,OAAO,CAAC,IAAnB;;AACA,UAAI,OAAO,CAAC,IAAR,IAAgB,OAAO,CAAC,GAA5B,EAAiC;AAC/B,QAAA,IAAI,GAAG,MAAA,CAAA,WAAA,CAAY,OAAO,CAAC,IAApB,CAAP;AACA,QAAA,IAAI,CAAC,WAAL,GAAmB,MAAA,CAAA,iBAAA,CACjB,OAAO,CAAC,IAAR,CAAa,WADI,EAEjB,OAAO,CAAC,GAAR,CAAY,CAAZ,CAFiB,CAAnB;AAID;;AAED,aAAO,EAAE,CAAC,OAAD,EAAU;AACjB,QAAA,IAAI,EAAE,IADW;AAEjB,QAAA,WAAW,EAAE,MAAA,CAAA,WAAA,CAAY,CAAC,OAAD,CAAZ,EAAuB,CAAC,IAAI,IAAI,IAAI,CAAC,WAAd,CAAvB;AAFI,OAAV,CAAT;AAID,KAdD,MAcO;AACL,aAAO,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAP;AACD;AACF,GA3BD;AA4BD,C","sourcesContent":["import {\n  appendContextPath,\n  blockParams,\n  createFrame,\n  isEmpty,\n  isFunction\n} from '../utils';\nimport Exception from '../exception';\n\nexport default function(instance) {\n  instance.registerHelper('with', function(context, options) {\n    if (arguments.length != 2) {\n      throw new Exception('#with requires exactly one argument');\n    }\n    if (isFunction(context)) {\n      context = context.call(this);\n    }\n\n    let fn = options.fn;\n\n    if (!isEmpty(context)) {\n      let data = options.data;\n      if (options.data && options.ids) {\n        data = createFrame(options.data);\n        data.contextPath = appendContextPath(\n          options.data.contextPath,\n          options.ids[0]\n        );\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: blockParams([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"script"}