{"ast":null,"code":"var _jsxFileName = \"/Users/kerp/Documents/GitHub/landing-page/src/contexts/Application.js\";\nimport React, { createContext, useContext, useReducer, useMemo, useCallback, useEffect } from 'react';\nimport { useWeb3React } from '../hooks';\nimport { safeAccess } from '../utils';\nconst BLOCK_NUMBER = 'BLOCK_NUMBER';\nconst USD_PRICE = 'USD_PRICE';\nconst WALLET_MODAL_OPEN = 'WALLET_MODAL_OPEN';\nconst UPDATE_BLOCK_NUMBER = 'UPDATE_BLOCK_NUMBER';\nconst TOGGLE_WALLET_MODAL = 'TOGGLE_WALLET_MODAL';\nconst ApplicationContext = createContext();\n\nfunction useApplicationContext() {\n  return useContext(ApplicationContext);\n}\n\nfunction reducer(state, {\n  type,\n  payload\n}) {\n  switch (type) {\n    case UPDATE_BLOCK_NUMBER:\n      {\n        const {\n          networkId,\n          blockNumber\n        } = payload;\n        return { ...state,\n          [BLOCK_NUMBER]: { ...(safeAccess(state, [BLOCK_NUMBER]) || {}),\n            [networkId]: blockNumber\n          }\n        };\n      }\n\n    case TOGGLE_WALLET_MODAL:\n      {\n        return { ...state,\n          [WALLET_MODAL_OPEN]: !state[WALLET_MODAL_OPEN]\n        };\n      }\n\n    default:\n      {\n        throw Error(`Unexpected action type in ApplicationContext reducer: '${type}'.`);\n      }\n  }\n}\n\nexport default function Provider({\n  children\n}) {\n  const [state, dispatch] = useReducer(reducer, {\n    [BLOCK_NUMBER]: {},\n    [USD_PRICE]: {},\n    [WALLET_MODAL_OPEN]: false\n  });\n  const updateBlockNumber = useCallback((networkId, blockNumber) => {\n    dispatch({\n      type: UPDATE_BLOCK_NUMBER,\n      payload: {\n        networkId,\n        blockNumber\n      }\n    });\n  }, []);\n  const toggleWalletModal = useCallback(() => {\n    dispatch({\n      type: TOGGLE_WALLET_MODAL\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(ApplicationContext.Provider, {\n    value: useMemo(() => [state, {\n      updateBlockNumber,\n      toggleWalletModal\n    }], [state, updateBlockNumber, toggleWalletModal]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, children);\n}\nexport function Updater() {\n  const {\n    library,\n    chainId\n  } = useWeb3React();\n  const [, {\n    updateBlockNumber\n  }] = useApplicationContext(); // update block number\n\n  useEffect(() => {\n    if (library) {\n      let stale = false;\n\n      function update() {\n        library.getBlockNumber().then(blockNumber => {\n          if (!stale) {\n            updateBlockNumber(chainId, blockNumber);\n          }\n        }).catch(() => {\n          if (!stale) {\n            updateBlockNumber(chainId, null);\n          }\n        });\n      }\n\n      update();\n      library.on('block', update);\n      return () => {\n        stale = true;\n        library.removeListener('block', update);\n      };\n    }\n  }, [chainId, library, updateBlockNumber]);\n  return null;\n}\nexport function useBlockNumber() {\n  const {\n    chainId\n  } = useWeb3React();\n  const [state] = useApplicationContext();\n  return safeAccess(state, [BLOCK_NUMBER, chainId]);\n}\nexport function useWalletModalOpen() {\n  const [state] = useApplicationContext();\n  return state[WALLET_MODAL_OPEN];\n}\nexport function useWalletModalToggle() {\n  const [, {\n    toggleWalletModal\n  }] = useApplicationContext();\n  return toggleWalletModal;\n}","map":{"version":3,"sources":["/Users/kerp/Documents/GitHub/landing-page/src/contexts/Application.js"],"names":["React","createContext","useContext","useReducer","useMemo","useCallback","useEffect","useWeb3React","safeAccess","BLOCK_NUMBER","USD_PRICE","WALLET_MODAL_OPEN","UPDATE_BLOCK_NUMBER","TOGGLE_WALLET_MODAL","ApplicationContext","useApplicationContext","reducer","state","type","payload","networkId","blockNumber","Error","Provider","children","dispatch","updateBlockNumber","toggleWalletModal","Updater","library","chainId","stale","update","getBlockNumber","then","catch","on","removeListener","useBlockNumber","useWalletModalOpen","useWalletModalToggle"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useReducer, useMemo, useCallback, useEffect } from 'react'\n\nimport { useWeb3React } from '../hooks'\nimport { safeAccess } from '../utils'\n\nconst BLOCK_NUMBER = 'BLOCK_NUMBER'\nconst USD_PRICE = 'USD_PRICE'\nconst WALLET_MODAL_OPEN = 'WALLET_MODAL_OPEN'\n\nconst UPDATE_BLOCK_NUMBER = 'UPDATE_BLOCK_NUMBER'\nconst TOGGLE_WALLET_MODAL = 'TOGGLE_WALLET_MODAL'\n\nconst ApplicationContext = createContext()\n\nfunction useApplicationContext() {\n  return useContext(ApplicationContext)\n}\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case UPDATE_BLOCK_NUMBER: {\n      const { networkId, blockNumber } = payload\n      return {\n        ...state,\n        [BLOCK_NUMBER]: {\n          ...(safeAccess(state, [BLOCK_NUMBER]) || {}),\n          [networkId]: blockNumber\n        }\n      }\n    }\n\n    case TOGGLE_WALLET_MODAL: {\n      return { ...state, [WALLET_MODAL_OPEN]: !state[WALLET_MODAL_OPEN] }\n    }\n    default: {\n      throw Error(`Unexpected action type in ApplicationContext reducer: '${type}'.`)\n    }\n  }\n}\n\nexport default function Provider({ children }) {\n  const [state, dispatch] = useReducer(reducer, {\n    [BLOCK_NUMBER]: {},\n    [USD_PRICE]: {},\n    [WALLET_MODAL_OPEN]: false\n  })\n\n  const updateBlockNumber = useCallback((networkId, blockNumber) => {\n    dispatch({ type: UPDATE_BLOCK_NUMBER, payload: { networkId, blockNumber } })\n  }, [])\n\n  const toggleWalletModal = useCallback(() => {\n    dispatch({ type: TOGGLE_WALLET_MODAL })\n  }, [])\n\n  return (\n    <ApplicationContext.Provider\n      value={useMemo(() => [state, { updateBlockNumber, toggleWalletModal }], [\n        state,\n        updateBlockNumber,\n        toggleWalletModal\n      ])}\n    >\n      {children}\n    </ApplicationContext.Provider>\n  )\n}\n\nexport function Updater() {\n  const { library, chainId } = useWeb3React()\n\n  const [, { updateBlockNumber }] = useApplicationContext()\n\n  // update block number\n  useEffect(() => {\n    if (library) {\n      let stale = false\n\n      function update() {\n        library\n          .getBlockNumber()\n          .then(blockNumber => {\n            if (!stale) {\n              updateBlockNumber(chainId, blockNumber)\n            }\n          })\n          .catch(() => {\n            if (!stale) {\n              updateBlockNumber(chainId, null)\n            }\n          })\n      }\n\n      update()\n      library.on('block', update)\n\n      return () => {\n        stale = true\n        library.removeListener('block', update)\n      }\n    }\n  }, [chainId, library, updateBlockNumber])\n\n  return null\n}\n\nexport function useBlockNumber() {\n  const { chainId } = useWeb3React()\n\n  const [state] = useApplicationContext()\n\n  return safeAccess(state, [BLOCK_NUMBER, chainId])\n}\n\nexport function useWalletModalOpen() {\n  const [state] = useApplicationContext()\n\n  return state[WALLET_MODAL_OPEN]\n}\n\nexport function useWalletModalToggle() {\n  const [, { toggleWalletModal }] = useApplicationContext()\n\n  return toggleWalletModal\n}\n"]},"metadata":{},"sourceType":"module"}