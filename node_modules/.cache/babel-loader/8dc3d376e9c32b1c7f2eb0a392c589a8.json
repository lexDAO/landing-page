{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n\nvar types_1 = require(\"../types\");\n\nvar constants_1 = require(\"../constants\");\n\nvar _utils_1 = require(\"../_utils\");\n\nfunction _format(bigNumber, decimalPlaces, roundingMode, format) {\n  if (roundingMode === void 0) {\n    roundingMode = constants_1._ROUNDING_MODE;\n  }\n\n  return types_1.isFormat(format) || format ? bigNumber.toFormat(decimalPlaces, roundingMode, types_1.isFormat(format) ? format : undefined) : bigNumber.toFixed(decimalPlaces, roundingMode);\n}\n\nfunction formatSignificant(bigNumberish, options) {\n  var _a = options || {},\n      _b = _a.significantDigits,\n      significantDigits = _b === void 0 ? 6 : _b,\n      _c = _a.roundingMode,\n      roundingMode = _c === void 0 ? constants_1._ROUNDING_MODE : _c,\n      _d = _a.forceIntegerSignificance,\n      forceIntegerSignificance = _d === void 0 ? true : _d,\n      _e = _a.format,\n      format = _e === void 0 ? false : _e;\n\n  var bigNumber = _utils_1.normalizeBigNumberish(bigNumberish);\n\n  _utils_1.ensureBoundedInteger(significantDigits, [1, constants_1._MAX_DECIMAL_PLACES]);\n\n  var minimumSignificantDigits = forceIntegerSignificance ? bigNumber.integerValue().toFixed().length : 0;\n  var preciseBigNumber = new bignumber_js_1.default(bigNumber.toPrecision(Math.max(minimumSignificantDigits, significantDigits)));\n  return _format(preciseBigNumber, preciseBigNumber.decimalPlaces(), roundingMode, format);\n}\n\nexports.formatSignificant = formatSignificant;\n\nfunction formatFixed(bigNumberish, options) {\n  var _a = options || {},\n      _b = _a.decimalPlaces,\n      decimalPlaces = _b === void 0 ? 4 : _b,\n      _c = _a.roundingMode,\n      roundingMode = _c === void 0 ? constants_1._ROUNDING_MODE : _c,\n      _d = _a.dropTrailingZeros,\n      dropTrailingZeros = _d === void 0 ? true : _d,\n      _e = _a.underflowBehavior,\n      underflowBehavior = _e === void 0 ? constants_1.FIXED_UNDERFLOW_BEHAVIOR.ONE_DIGIT : _e,\n      _f = _a.format,\n      format = _f === void 0 ? false : _f;\n\n  var bigNumber = _utils_1.normalizeBigNumberish(bigNumberish);\n\n  _utils_1.ensureBoundedInteger(decimalPlaces, constants_1._MAX_DECIMAL_PLACES);\n\n  var minimumNonZeroValue = new bignumber_js_1.default(decimalPlaces === 0 ? '0.5' : \"0.\" + '0'.repeat(decimalPlaces) + \"5\");\n\n  if (bigNumber.isLessThan(minimumNonZeroValue)) {\n    switch (underflowBehavior) {\n      case constants_1.FIXED_UNDERFLOW_BEHAVIOR.ZERO:\n        {\n          return _format(constants_1._0, dropTrailingZeros ? 0 : decimalPlaces, undefined, format);\n        }\n\n      case constants_1.FIXED_UNDERFLOW_BEHAVIOR.LESS_THAN:\n        {\n          return \"<\" + _format(minimumNonZeroValue, minimumNonZeroValue.decimalPlaces(), undefined, format);\n        }\n\n      case constants_1.FIXED_UNDERFLOW_BEHAVIOR.ONE_DIGIT:\n        {\n          var newBigNumber = new bignumber_js_1.default(bigNumber.toPrecision(1));\n          return _format(newBigNumber, newBigNumber.decimalPlaces(), undefined, format);\n        }\n\n      default:\n        {\n          throw Error(\"Passed FIXED_UNDERFLOW_BEHAVIOR \" + underflowBehavior + \" is not valid.\");\n        }\n    }\n  } else {\n    var newDecimalPlaces = dropTrailingZeros ? new bignumber_js_1.default(bigNumber.toFixed(decimalPlaces, roundingMode)).decimalPlaces() : decimalPlaces;\n    return _format(bigNumber, newDecimalPlaces, roundingMode, format);\n  }\n}\n\nexports.formatFixed = formatFixed;\n\nfunction decimalize(bigNumberish, decimals) {\n  var bigNumber = _utils_1.normalizeBigNumberish(bigNumberish);\n\n  _utils_1.ensureAllUInt256([bigNumber]);\n\n  _utils_1.ensureAllUInt8([decimals]);\n\n  if (decimals > constants_1._MAX_DECIMAL_PLACES) {\n    throw Error(\"This function does not support decimals greater than \" + constants_1._MAX_DECIMAL_PLACES + \".\");\n  }\n\n  return bigNumber.dividedBy(constants_1._10.exponentiatedBy(decimals));\n}\n\nfunction formatSignificantDecimals(bigNumberish, decimals, options) {\n  return formatSignificant(decimalize(bigNumberish, decimals), options);\n}\n\nexports.formatSignificantDecimals = formatSignificantDecimals;\n\nfunction formatFixedDecimals(bigNumberish, decimals, options) {\n  return formatFixed(decimalize(bigNumberish, decimals), options);\n}\n\nexports.formatFixedDecimals = formatFixedDecimals;","map":{"version":3,"sources":["../../src/format/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\nvar types_1 = require(\"../types\");\nvar constants_1 = require(\"../constants\");\nvar _utils_1 = require(\"../_utils\");\nfunction _format(bigNumber, decimalPlaces, roundingMode, format) {\n    if (roundingMode === void 0) { roundingMode = constants_1._ROUNDING_MODE; }\n    return types_1.isFormat(format) || format\n        ? bigNumber.toFormat(decimalPlaces, roundingMode, types_1.isFormat(format) ? format : undefined)\n        : bigNumber.toFixed(decimalPlaces, roundingMode);\n}\nfunction formatSignificant(bigNumberish, options) {\n    var _a = options || {}, _b = _a.significantDigits, significantDigits = _b === void 0 ? 6 : _b, _c = _a.roundingMode, roundingMode = _c === void 0 ? constants_1._ROUNDING_MODE : _c, _d = _a.forceIntegerSignificance, forceIntegerSignificance = _d === void 0 ? true : _d, _e = _a.format, format = _e === void 0 ? false : _e;\n    var bigNumber = _utils_1.normalizeBigNumberish(bigNumberish);\n    _utils_1.ensureBoundedInteger(significantDigits, [1, constants_1._MAX_DECIMAL_PLACES]);\n    var minimumSignificantDigits = forceIntegerSignificance ? bigNumber.integerValue().toFixed().length : 0;\n    var preciseBigNumber = new bignumber_js_1.default(bigNumber.toPrecision(Math.max(minimumSignificantDigits, significantDigits)));\n    return _format(preciseBigNumber, preciseBigNumber.decimalPlaces(), roundingMode, format);\n}\nexports.formatSignificant = formatSignificant;\nfunction formatFixed(bigNumberish, options) {\n    var _a = options || {}, _b = _a.decimalPlaces, decimalPlaces = _b === void 0 ? 4 : _b, _c = _a.roundingMode, roundingMode = _c === void 0 ? constants_1._ROUNDING_MODE : _c, _d = _a.dropTrailingZeros, dropTrailingZeros = _d === void 0 ? true : _d, _e = _a.underflowBehavior, underflowBehavior = _e === void 0 ? constants_1.FIXED_UNDERFLOW_BEHAVIOR.ONE_DIGIT : _e, _f = _a.format, format = _f === void 0 ? false : _f;\n    var bigNumber = _utils_1.normalizeBigNumberish(bigNumberish);\n    _utils_1.ensureBoundedInteger(decimalPlaces, constants_1._MAX_DECIMAL_PLACES);\n    var minimumNonZeroValue = new bignumber_js_1.default(decimalPlaces === 0 ? '0.5' : \"0.\" + '0'.repeat(decimalPlaces) + \"5\");\n    if (bigNumber.isLessThan(minimumNonZeroValue)) {\n        switch (underflowBehavior) {\n            case constants_1.FIXED_UNDERFLOW_BEHAVIOR.ZERO: {\n                return _format(constants_1._0, dropTrailingZeros ? 0 : decimalPlaces, undefined, format);\n            }\n            case constants_1.FIXED_UNDERFLOW_BEHAVIOR.LESS_THAN: {\n                return \"<\" + _format(minimumNonZeroValue, minimumNonZeroValue.decimalPlaces(), undefined, format);\n            }\n            case constants_1.FIXED_UNDERFLOW_BEHAVIOR.ONE_DIGIT: {\n                var newBigNumber = new bignumber_js_1.default(bigNumber.toPrecision(1));\n                return _format(newBigNumber, newBigNumber.decimalPlaces(), undefined, format);\n            }\n            default: {\n                throw Error(\"Passed FIXED_UNDERFLOW_BEHAVIOR \" + underflowBehavior + \" is not valid.\");\n            }\n        }\n    }\n    else {\n        var newDecimalPlaces = dropTrailingZeros\n            ? new bignumber_js_1.default(bigNumber.toFixed(decimalPlaces, roundingMode)).decimalPlaces()\n            : decimalPlaces;\n        return _format(bigNumber, newDecimalPlaces, roundingMode, format);\n    }\n}\nexports.formatFixed = formatFixed;\nfunction decimalize(bigNumberish, decimals) {\n    var bigNumber = _utils_1.normalizeBigNumberish(bigNumberish);\n    _utils_1.ensureAllUInt256([bigNumber]);\n    _utils_1.ensureAllUInt8([decimals]);\n    if (decimals > constants_1._MAX_DECIMAL_PLACES) {\n        throw Error(\"This function does not support decimals greater than \" + constants_1._MAX_DECIMAL_PLACES + \".\");\n    }\n    return bigNumber.dividedBy(constants_1._10.exponentiatedBy(decimals));\n}\nfunction formatSignificantDecimals(bigNumberish, decimals, options) {\n    return formatSignificant(decimalize(bigNumberish, decimals), options);\n}\nexports.formatSignificantDecimals = formatSignificantDecimals;\nfunction formatFixedDecimals(bigNumberish, decimals, options) {\n    return formatFixed(decimalize(bigNumberish, decimals), options);\n}\nexports.formatFixedDecimals = formatFixedDecimals;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}