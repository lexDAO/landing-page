{"ast":null,"code":"import _slicedToArray from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  font-size: 4rem;\\n\\n  svg {\\n    path {\\n      color: \",\";\\n    }\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  color: \",\";\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 20rem;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect}from'react';import{useWeb3React}from'@web3-react/core';import styled from'styled-components';import{useTranslation}from'react-i18next';import{network}from'../../connectors';import{useEagerConnect,useInactiveListener}from'../../hooks';import{Spinner}from'../../theme';import Circle from\"../../assets/images/circle.svg\";import{NetworkContextName}from'../../constants';var MessageWrapper=styled.div(_templateObject());var Message=styled.h2(_templateObject2(),function(_ref){var theme=_ref.theme;return theme.uniswapPink;});var SpinnerWrapper=styled(Spinner)(_templateObject3(),function(_ref2){var theme=_ref2.theme;return theme.uniswapPink;});export default function Web3ReactManager(_ref3){var children=_ref3.children;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useWeb3React=useWeb3React(),active=_useWeb3React.active;var _useWeb3React2=useWeb3React(NetworkContextName),networkActive=_useWeb3React2.active,networkError=_useWeb3React2.error,activateNetwork=_useWeb3React2.activate;// try to eagerly connect to an injected provider, if it exists and has granted access already\nvar triedEager=useEagerConnect();// after eagerly trying injected, if the network connect ever isn't active or in an error state, activate itd\n// TODO think about not doing this at all\nuseEffect(function(){if(triedEager&&!networkActive&&!networkError&&!active){activateNetwork(network);}},[triedEager,networkActive,networkError,activateNetwork,active]);// 'pause' the network connector if we're ever connected to an account and it's active\nuseEffect(function(){if(active&&networkActive){network.pause();}},[active,networkActive]);// 'resume' the network connector if we're ever not connected to an account and it's active\nuseEffect(function(){if(!active&&networkActive){network.resume();}},[active,networkActive]);// when there's no account connected, react to logins (broadly speaking) on the injected provider, if it exists\nuseInactiveListener(!triedEager);// handle delayed loader state\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLoader=_useState2[0],setShowLoader=_useState2[1];useEffect(function(){var timeout=setTimeout(function(){setShowLoader(true);},600);return function(){clearTimeout(timeout);};},[]);// on page load, do nothing until we've tried to connect to the injected connector\nif(!triedEager){return null;}// if the account context isn't active, and there's an error on the network context, it's an irrecoverable error\nif(!active&&networkError){return/*#__PURE__*/React.createElement(MessageWrapper,null,/*#__PURE__*/React.createElement(Message,null,t('unknownError')));}// if neither context is active, spin\nif(!active&&!networkActive){return showLoader?/*#__PURE__*/React.createElement(MessageWrapper,null,/*#__PURE__*/React.createElement(SpinnerWrapper,{src:Circle})):null;}return children;}","map":{"version":3,"sources":["/Users/kerp/Documents/GitHub/landing-page/src/components/Web3ReactManager/index.js"],"names":["React","useState","useEffect","useWeb3React","styled","useTranslation","network","useEagerConnect","useInactiveListener","Spinner","NetworkContextName","MessageWrapper","div","Message","h2","theme","uniswapPink","SpinnerWrapper","Web3ReactManager","children","t","active","networkActive","networkError","error","activateNetwork","activate","triedEager","pause","resume","showLoader","setShowLoader","timeout","setTimeout","clearTimeout","Circle"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport styled from 'styled-components'\nimport { useTranslation } from 'react-i18next'\n\nimport { network } from '../../connectors'\nimport { useEagerConnect, useInactiveListener } from '../../hooks'\nimport { Spinner } from '../../theme'\nimport Circle from '../../assets/images/circle.svg'\nimport { NetworkContextName } from '../../constants'\n\nconst MessageWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 20rem;\n`\n\nconst Message = styled.h2`\n  color: ${({ theme }) => theme.uniswapPink};\n`\n\nconst SpinnerWrapper = styled(Spinner)`\n  font-size: 4rem;\n\n  svg {\n    path {\n      color: ${({ theme }) => theme.uniswapPink};\n    }\n  }\n`\n\nexport default function Web3ReactManager({ children }) {\n  const { t } = useTranslation()\n  const { active } = useWeb3React()\n  const { active: networkActive, error: networkError, activate: activateNetwork } = useWeb3React(NetworkContextName)\n\n  // try to eagerly connect to an injected provider, if it exists and has granted access already\n  const triedEager = useEagerConnect()\n\n  // after eagerly trying injected, if the network connect ever isn't active or in an error state, activate itd\n  // TODO think about not doing this at all\n  useEffect(() => {\n    if (triedEager && !networkActive && !networkError && !active) {\n      activateNetwork(network)\n    }\n  }, [triedEager, networkActive, networkError, activateNetwork, active])\n\n  // 'pause' the network connector if we're ever connected to an account and it's active\n  useEffect(() => {\n    if (active && networkActive) {\n      network.pause()\n    }\n  }, [active, networkActive])\n\n  // 'resume' the network connector if we're ever not connected to an account and it's active\n  useEffect(() => {\n    if (!active && networkActive) {\n      network.resume()\n    }\n  }, [active, networkActive])\n\n  // when there's no account connected, react to logins (broadly speaking) on the injected provider, if it exists\n  useInactiveListener(!triedEager)\n\n  // handle delayed loader state\n  const [showLoader, setShowLoader] = useState(false)\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setShowLoader(true)\n    }, 600)\n\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [])\n\n  // on page load, do nothing until we've tried to connect to the injected connector\n  if (!triedEager) {\n    return null\n  }\n\n  // if the account context isn't active, and there's an error on the network context, it's an irrecoverable error\n  if (!active && networkError) {\n    return (\n      <MessageWrapper>\n        <Message>{t('unknownError')}</Message>\n      </MessageWrapper>\n    )\n  }\n\n  // if neither context is active, spin\n  if (!active && !networkActive) {\n    return showLoader ? (\n      <MessageWrapper>\n        <SpinnerWrapper src={Circle} />\n      </MessageWrapper>\n    ) : null\n  }\n\n  return children\n}\n"]},"metadata":{},"sourceType":"module"}