{"ast":null,"code":"import _slicedToArray from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/kerp/Documents/GitHub/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{createContext,useContext,useReducer,useMemo,useCallback,useEffect}from'react';var UNISWAP='UNISWAP';var VERSION='VERSION';var CURRENT_VERSION=0;var LAST_SAVED='LAST_SAVED';var BETA_MESSAGE_DISMISSED='BETA_MESSAGE_DISMISSED';var GENERAL_DAI__MESSAGE_DISMISSED='GENERAL_DAI__MESSAGE_DISMISSED';var SAI_HOLDER__MESSAGE_DISMISSED='SAI_HOLDER__MESSAGE_DISMISSED';var DARK_MODE='DARK_MODE';var UPDATABLE_KEYS=[GENERAL_DAI__MESSAGE_DISMISSED,SAI_HOLDER__MESSAGE_DISMISSED,BETA_MESSAGE_DISMISSED,DARK_MODE];var UPDATE_KEY='UPDATE_KEY';var LocalStorageContext=createContext();function useLocalStorageContext(){return useContext(LocalStorageContext);}function reducer(state,_ref){var type=_ref.type,payload=_ref.payload;switch(type){case UPDATE_KEY:{var key=payload.key,value=payload.value;if(!UPDATABLE_KEYS.some(function(k){return k===key;})){throw Error(\"Unexpected key in LocalStorageContext reducer: '\".concat(key,\"'.\"));}else{return _objectSpread(_objectSpread({},state),{},_defineProperty({},key,value));}}default:{throw Error(\"Unexpected action type in LocalStorageContext reducer: '\".concat(type,\"'.\"));}}}function init(){var _defaultLocalStorage;var defaultLocalStorage=(_defaultLocalStorage={},_defineProperty(_defaultLocalStorage,VERSION,CURRENT_VERSION),_defineProperty(_defaultLocalStorage,BETA_MESSAGE_DISMISSED,false),_defineProperty(_defaultLocalStorage,GENERAL_DAI__MESSAGE_DISMISSED,false),_defineProperty(_defaultLocalStorage,SAI_HOLDER__MESSAGE_DISMISSED,false),_defineProperty(_defaultLocalStorage,DARK_MODE,true),_defaultLocalStorage);try{var parsed=JSON.parse(window.localStorage.getItem(UNISWAP));if(parsed[VERSION]!==CURRENT_VERSION){// this is where we could run migration logic\nreturn defaultLocalStorage;}else{return _objectSpread(_objectSpread({},defaultLocalStorage),parsed);}}catch(_unused){return defaultLocalStorage;}}export default function Provider(_ref2){var children=_ref2.children;var _useReducer=useReducer(reducer,undefined,init),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var updateKey=useCallback(function(key,value){dispatch({type:UPDATE_KEY,payload:{key:key,value:value}});},[]);return/*#__PURE__*/React.createElement(LocalStorageContext.Provider,{value:useMemo(function(){return[state,{updateKey:updateKey}];},[state,updateKey])},children);}export function Updater(){var _useLocalStorageConte=useLocalStorageContext(),_useLocalStorageConte2=_slicedToArray(_useLocalStorageConte,1),state=_useLocalStorageConte2[0];useEffect(function(){window.localStorage.setItem(UNISWAP,JSON.stringify(_objectSpread(_objectSpread({},state),{},_defineProperty({},LAST_SAVED,Math.floor(Date.now()/1000)))));});return null;}export function useSaiHolderMessageManager(){var _useLocalStorageConte3=useLocalStorageContext(),_useLocalStorageConte4=_slicedToArray(_useLocalStorageConte3,2),state=_useLocalStorageConte4[0],updateKey=_useLocalStorageConte4[1].updateKey;var dismissSaiHolderMessage=useCallback(function(){updateKey(SAI_HOLDER__MESSAGE_DISMISSED,true);},[updateKey]);return[!state[SAI_HOLDER__MESSAGE_DISMISSED],dismissSaiHolderMessage];}export function useGeneralDaiMessageManager(){var _useLocalStorageConte5=useLocalStorageContext(),_useLocalStorageConte6=_slicedToArray(_useLocalStorageConte5,2),state=_useLocalStorageConte6[0],updateKey=_useLocalStorageConte6[1].updateKey;var dismissGeneralDaiMessage=useCallback(function(){updateKey(GENERAL_DAI__MESSAGE_DISMISSED,true);},[updateKey]);return[!state[GENERAL_DAI__MESSAGE_DISMISSED],dismissGeneralDaiMessage];}export function useBetaMessageManager(){var _useLocalStorageConte7=useLocalStorageContext(),_useLocalStorageConte8=_slicedToArray(_useLocalStorageConte7,2),state=_useLocalStorageConte8[0],updateKey=_useLocalStorageConte8[1].updateKey;var dismissBetaMessage=useCallback(function(){updateKey(BETA_MESSAGE_DISMISSED,true);},[updateKey]);return[!state[BETA_MESSAGE_DISMISSED],dismissBetaMessage];}export function useDarkModeManager(){var _useLocalStorageConte9=useLocalStorageContext(),_useLocalStorageConte10=_slicedToArray(_useLocalStorageConte9,2),state=_useLocalStorageConte10[0],updateKey=_useLocalStorageConte10[1].updateKey;var isDarkMode=state[DARK_MODE];var toggleDarkMode=useCallback(function(value){updateKey(DARK_MODE,value===false||value===true?value:!isDarkMode);},[updateKey,isDarkMode]);return[state[DARK_MODE],toggleDarkMode];}","map":{"version":3,"sources":["/Users/kerp/Documents/GitHub/landing-page/src/contexts/LocalStorage.js"],"names":["React","createContext","useContext","useReducer","useMemo","useCallback","useEffect","UNISWAP","VERSION","CURRENT_VERSION","LAST_SAVED","BETA_MESSAGE_DISMISSED","GENERAL_DAI__MESSAGE_DISMISSED","SAI_HOLDER__MESSAGE_DISMISSED","DARK_MODE","UPDATABLE_KEYS","UPDATE_KEY","LocalStorageContext","useLocalStorageContext","reducer","state","type","payload","key","value","some","k","Error","init","defaultLocalStorage","parsed","JSON","parse","window","localStorage","getItem","Provider","children","undefined","dispatch","updateKey","Updater","setItem","stringify","Math","floor","Date","now","useSaiHolderMessageManager","dismissSaiHolderMessage","useGeneralDaiMessageManager","dismissGeneralDaiMessage","useBetaMessageManager","dismissBetaMessage","useDarkModeManager","isDarkMode","toggleDarkMode"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useReducer, useMemo, useCallback, useEffect } from 'react'\n\nconst UNISWAP = 'UNISWAP'\n\nconst VERSION = 'VERSION'\nconst CURRENT_VERSION = 0\nconst LAST_SAVED = 'LAST_SAVED'\n\nconst BETA_MESSAGE_DISMISSED = 'BETA_MESSAGE_DISMISSED'\nconst GENERAL_DAI__MESSAGE_DISMISSED = 'GENERAL_DAI__MESSAGE_DISMISSED'\nconst SAI_HOLDER__MESSAGE_DISMISSED = 'SAI_HOLDER__MESSAGE_DISMISSED'\nconst DARK_MODE = 'DARK_MODE'\n\nconst UPDATABLE_KEYS = [\n  GENERAL_DAI__MESSAGE_DISMISSED,\n  SAI_HOLDER__MESSAGE_DISMISSED,\n  BETA_MESSAGE_DISMISSED,\n  DARK_MODE\n]\n\nconst UPDATE_KEY = 'UPDATE_KEY'\n\nconst LocalStorageContext = createContext()\n\nfunction useLocalStorageContext() {\n  return useContext(LocalStorageContext)\n}\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case UPDATE_KEY: {\n      const { key, value } = payload\n      if (!UPDATABLE_KEYS.some(k => k === key)) {\n        throw Error(`Unexpected key in LocalStorageContext reducer: '${key}'.`)\n      } else {\n        return {\n          ...state,\n          [key]: value\n        }\n      }\n    }\n    default: {\n      throw Error(`Unexpected action type in LocalStorageContext reducer: '${type}'.`)\n    }\n  }\n}\n\nfunction init() {\n  const defaultLocalStorage = {\n    [VERSION]: CURRENT_VERSION,\n    [BETA_MESSAGE_DISMISSED]: false,\n    [GENERAL_DAI__MESSAGE_DISMISSED]: false,\n    [SAI_HOLDER__MESSAGE_DISMISSED]: false,\n    [DARK_MODE]: true\n  }\n\n  try {\n    const parsed = JSON.parse(window.localStorage.getItem(UNISWAP))\n    if (parsed[VERSION] !== CURRENT_VERSION) {\n      // this is where we could run migration logic\n      return defaultLocalStorage\n    } else {\n      return { ...defaultLocalStorage, ...parsed }\n    }\n  } catch {\n    return defaultLocalStorage\n  }\n}\n\nexport default function Provider({ children }) {\n  const [state, dispatch] = useReducer(reducer, undefined, init)\n\n  const updateKey = useCallback((key, value) => {\n    dispatch({ type: UPDATE_KEY, payload: { key, value } })\n  }, [])\n\n  return (\n    <LocalStorageContext.Provider value={useMemo(() => [state, { updateKey }], [state, updateKey])}>\n      {children}\n    </LocalStorageContext.Provider>\n  )\n}\n\nexport function Updater() {\n  const [state] = useLocalStorageContext()\n\n  useEffect(() => {\n    window.localStorage.setItem(UNISWAP, JSON.stringify({ ...state, [LAST_SAVED]: Math.floor(Date.now() / 1000) }))\n  })\n\n  return null\n}\n\nexport function useSaiHolderMessageManager() {\n  const [state, { updateKey }] = useLocalStorageContext()\n\n  const dismissSaiHolderMessage = useCallback(() => {\n    updateKey(SAI_HOLDER__MESSAGE_DISMISSED, true)\n  }, [updateKey])\n\n  return [!state[SAI_HOLDER__MESSAGE_DISMISSED], dismissSaiHolderMessage]\n}\n\nexport function useGeneralDaiMessageManager() {\n  const [state, { updateKey }] = useLocalStorageContext()\n\n  const dismissGeneralDaiMessage = useCallback(() => {\n    updateKey(GENERAL_DAI__MESSAGE_DISMISSED, true)\n  }, [updateKey])\n\n  return [!state[GENERAL_DAI__MESSAGE_DISMISSED], dismissGeneralDaiMessage]\n}\n\nexport function useBetaMessageManager() {\n  const [state, { updateKey }] = useLocalStorageContext()\n\n  const dismissBetaMessage = useCallback(() => {\n    updateKey(BETA_MESSAGE_DISMISSED, true)\n  }, [updateKey])\n\n  return [!state[BETA_MESSAGE_DISMISSED], dismissBetaMessage]\n}\n\nexport function useDarkModeManager() {\n  const [state, { updateKey }] = useLocalStorageContext()\n\n  let isDarkMode = state[DARK_MODE]\n\n  const toggleDarkMode = useCallback(\n    value => {\n      updateKey(DARK_MODE, value === false || value === true ? value : !isDarkMode)\n    },\n    [updateKey, isDarkMode]\n  )\n\n  return [state[DARK_MODE], toggleDarkMode]\n}\n"]},"metadata":{},"sourceType":"module"}